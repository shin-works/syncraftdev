---
/**
 * BlogCard â€” Single article card for the blog list
 */
import type { Lang } from '../i18n/translations';
import { t } from '../i18n/utils';

interface Props {
  lang: Lang;
  title: string;
  date: Date;
  description: string;
  slug: string;
  image?: string;
  imageAlt?: string;
}

const { lang, title, date, description, slug, image, imageAlt } = Astro.props;

const blogBase = lang === 'ja' ? '/blog' : '/en/blog';
const href = `${blogBase}/${slug}/`;

const formattedDate = date.toISOString().slice(0, 10).replace(/-/g, '.');
const isoDate = date.toISOString().slice(0, 10);
---

<article class="article-card">
  <time datetime={isoDate}>{formattedDate}</time>
  <h3><a href={href}>{title}</a></h3>
  {image && (
    <div class="article-hero">
      <img src={image} alt={imageAlt ?? title} loading="lazy" />
    </div>
  )}
  <p class="article-summary">{description}</p>
  <a href={href} class="read-more">{t(lang, 'blog.readmore')}</a>
</article>
